(()=>{var e={};e.id=363,e.ids=[363],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2571:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>o,originalPathname:()=>m,pages:()=>x,routeModule:()=>h,tree:()=>n}),s(3870),s(2029),s(5866);var a=s(3191),r=s(8716),i=s(7922),d=s.n(i),l=s(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let n=["",{children:["cadets",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3870)),"/Users/ankushjha/Desktop/CURACADET/src/app/cadets/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/ankushjha/Desktop/CURACADET/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],x=["/Users/ankushjha/Desktop/CURACADET/src/app/cadets/[id]/page.tsx"],m="/cadets/[id]/page",o={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/cadets/[id]/page",pathname:"/cadets/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},536:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23)),Promise.resolve().then(s.bind(s,4825)),Promise.resolve().then(s.bind(s,80))},7358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(664).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(664).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4825:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(326),r=s(7358),i=s(8998),d=s(434);function l({records:e,cadetId:t}){let s=async(e,t)=>{try{let s=localStorage.getItem("jwt_token");if(!s){alert("Authentication required");return}let a=await fetch(`/api/medical-records/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({status:t})});if(a.ok)window.location.reload();else{let e=await a.json();alert(`Failed to update status: ${e.error||"Unknown error"}`)}}catch(e){console.error("Error updating status:",e),alert("Failed to update medical record status")}};return(0,a.jsxs)("div",{className:"space-y-4",children:[e.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"card p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.medicalProblem}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(r.Z,{className:"h-4 w-4"}),a.jsx("span",{children:new Date(e.dateOfReporting).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(i.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"Active"===e.status?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"Completed"===e.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:e.status}),"Active"===e.status&&(0,a.jsxs)("button",{onClick:()=>s(e.id,"Completed"),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-600 text-white rounded hover:bg-green-700 transition-colors",title:"Mark as completed",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Complete"]}),e.monitoringCase&&a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",children:"Monitoring Case"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.diagnosis&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Diagnosis"}),a.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:e.diagnosis})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Details"}),(0,a.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white mt-1 space-y-1",children:[(0,a.jsxs)("div",{children:["Attend C: ",e.attendC]}),e.trainingDaysMissed>0&&(0,a.jsxs)("div",{children:["Training Days Missed: ",e.trainingDaysMissed]})]})]})]}),e.remarks&&(0,a.jsxs)("div",{className:"mt-3",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Remarks"}),a.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:e.remarks})]})]},e.id)),e.length>5&&a.jsx("div",{className:"text-center pt-4",children:(0,a.jsxs)(d.default,{href:`/medical-history/${t}`,className:"text-primary hover:text-primary/80",children:["View all ",e.length," records →"]})})]})}},3870:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(9510),r=s(8585),i=s(8630),d=s(9755),l=s(71),c=s(2688),n=s(7162);let x=(0,n.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),m=(0,n.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var o=s(1112),h=s(4120);let p=(0,n.Z)("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),g=(0,n.Z)("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]),y=(0,n.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),j=(0,n.Z)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),u=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var k=s(7371);let N=(0,s(8570).createProxy)(String.raw`/Users/ankushjha/Desktop/CURACADET/src/app/cadets/[id]/MedicalRecordsList.tsx#default`);async function v({params:e}){let t=parseInt(e.id);isNaN(t)&&(0,r.notFound)();try{let[e,s]=await Promise.all([fetch(`${process.env.NEXTAUTH_URL||"http://localhost:3000"}/api/cadets/${t}`,{cache:"no-store",credentials:"include"}),fetch(`${process.env.NEXTAUTH_URL||"http://localhost:3000"}/api/medical-history/${t}`,{cache:"no-store",credentials:"include"})]);e.ok||(0,r.notFound)();let n=await e.json(),{records:v}=s.ok?await s.json():{records:[]},f=v.reduce((e,t)=>e+(t.trainingDaysMissed||0),0);return a.jsx(i.Z,{children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:(0,a.jsxs)(k.default,{href:"/dashboard",className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[a.jsx(d.Z,{className:"h-4 w-4"}),"Back to Dashboard"]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"h-20 w-20 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center",children:a.jsx("span",{className:"text-primary font-bold text-2xl",children:n.name.split(" ").map(e=>e[0]).join("")})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:n.name}),a.jsx(k.default,{href:`/cadets/${t}/edit`,className:"inline-flex items-center justify-center p-2 text-gray-400 hover:text-primary hover:bg-primary/10 rounded-lg transition-colors",title:"Edit cadet information",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-4",children:[a.jsx(l.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[n.company," Company, ",n.battalion]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Join Date"}),a.jsx("p",{className:"text-sm font-medium",children:new Date(n.joinDate).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"Active"===n.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:n.status})]})]}),n.academyNumber&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Academy Number"}),a.jsx("p",{className:"text-sm font-medium",children:n.academyNumber})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Health Status"}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"Fit"===n.healthStatus?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"Under Treatment"===n.healthStatus?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"}`,children:n.healthStatus})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Medical Records"}),a.jsx("p",{className:"text-sm font-medium",children:v.length})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"h-4 w-4 text-red-500"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total Days Missed"}),a.jsx("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:f})]})]})]}),(n.height||n.weight||n.age||n.course||n.sex||n.academyNumber)&&(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Demographics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[n.height&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(p,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Height"}),(0,a.jsxs)("p",{className:"text-sm font-medium",children:[n.height," cm"]})]})]}),n.weight&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(g,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Weight"}),(0,a.jsxs)("p",{className:"text-sm font-medium",children:[n.weight," kg"]})]})]}),n.age&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(y,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Age"}),(0,a.jsxs)("p",{className:"text-sm font-medium",children:[n.age," years"]})]})]}),n.course&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(j,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Course"}),a.jsx("p",{className:"text-sm font-medium",children:n.course})]})]}),n.sex&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Sex"}),a.jsx("p",{className:"text-sm font-medium",children:n.sex})]})]})]})]}),!(n.height||n.weight||n.age||n.course||n.sex||n.academyNumber)&&a.jsx("div",{className:"mt-6"})]})]}),a.jsx("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Cadet ID"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-primary",children:["#",t]})]})})]})}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Medical History"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(k.default,{href:`/medical-records/new?cadetId=${t}`,className:"inline-flex items-center justify-center p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",title:"Add another medical record",children:a.jsx(u,{className:"h-4 w-4"})}),a.jsx(k.default,{href:`/medical-history/${t}`,className:"text-primary hover:text-primary/80 text-sm",children:"View Timeline →"})]})]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:["Complete medical record history for ",n.name]})]})})}),a.jsx("div",{className:"p-6",children:0===v.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(o.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Medical Records"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"This cadet has no medical records yet."})]}):a.jsx(N,{records:v,cadetId:t})})]})]})})}catch(e){console.error("Error loading cadet details:",e),(0,r.notFound)()}}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,471,244,612],()=>s(2571));module.exports=a})();