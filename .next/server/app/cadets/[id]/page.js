(()=>{var e={};e.id=363,e.ids=[363],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2571:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>h,tree:()=>n}),s(2141),s(2029),s(5866);var a=s(3191),r=s(8716),i=s(7922),d=s.n(i),l=s(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let n=["",{children:["cadets",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2141)),"/Users/ankushjha/Desktop/CURACADET/src/app/cadets/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/ankushjha/Desktop/CURACADET/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],x=["/Users/ankushjha/Desktop/CURACADET/src/app/cadets/[id]/page.tsx"],o="/cadets/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/cadets/[id]/page",pathname:"/cadets/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},4436:(e,t,s)=>{Promise.resolve().then(s.bind(s,2322))},1215:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(664).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9508:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(664).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(664).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2322:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(326),r=s(5047),i=s(80),d=s(6333),l=s(664);let c=(0,l.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var n=s(7358),x=s(6283),o=s(8998);let m=(0,l.Z)("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),h=(0,l.Z)("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);var p=s(1215),g=s(4019),u=s(9508),j=s(4061);let y=(0,l.Z)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var N=s(9635),f=s(3855),v=s(6697),k=s(434),w=s(4825),b=s(7577);function C({params:e}){(0,r.useRouter)(),(0,r.useSearchParams)();let t=parseInt(e.id),[s,l]=(0,b.useState)(null),[C,E]=(0,b.useState)([]),[A,Z]=(0,b.useState)(!0),[S,D]=(0,b.useState)(null),[P,M]=(0,b.useState)(!1),[R,T]=(0,b.useState)(""),[_,q]=(0,b.useState)(!1);(0,b.useCallback)(async()=>{try{console.log(`ðŸ“¡ FETCHING CADET DATA for cadet ${t}`),Z(!0),D(null);let e=localStorage.getItem("jwt_token");if(!e){D("Authentication required");return}let s={Authorization:`Bearer ${e}`},[a,r]=await Promise.all([fetch(`/api/cadets/${t}`,{headers:s}),fetch(`/api/medical-history/${t}`,{headers:s})]);if(!a.ok)throw Error("Failed to fetch cadet");let i=await a.json(),d=r.ok?await r.json():{records:[]},{records:c}=d;console.log(`âœ… RECEIVED CADET DATA:`,i),console.log(`âœ… RAW RECORDS RESPONSE:`,d),console.log(`âœ… RECEIVED MEDICAL RECORDS:`,c.length,"records"),console.log(`âœ… RECORDS RESPONSE STATUS:`,r.status,r.ok),l(i),E(c),T(i.weight?.toString()||"")}catch(e){console.error("âŒ Error loading cadet details:",e),D(e instanceof Error?e.message:"Failed to load cadet details")}finally{Z(!1)}},[t]);let I=async()=>{if(s)try{q(!0);let e=R?parseInt(R):void 0;if(!(await fetch(`/api/cadets/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({weight:e})})).ok)throw Error("Failed to update weight");l({...s,weight:e}),M(!1)}catch(e){console.error("Error updating weight:",e),alert("Failed to update weight. Please try again.")}finally{q(!1)}},L=C.reduce((e,t)=>{let s=t.totalTrainingDaysMissed||0;return t.exPpg&&(s+=.25*t.exPpg),t.attendB&&(s+=.25*t.attendB),e+s},0);return A?a.jsx(i.Z,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):S||!s?a.jsx(i.Z,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:S||"Cadet not found"}),a.jsx(k.default,{href:"/cadets",className:"text-primary hover:text-primary/80",children:"Return to Cadets Page"})]})})}):a.jsx(i.Z,{children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(k.default,{href:"/cadets",className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[a.jsx(d.Z,{className:"h-4 w-4"}),"Back to Cadets"]}),a.jsx("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400",children:"Cadet ID"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-primary",children:["#",t]})]})})]}),a.jsx("div",{className:"card p-6",children:a.jsx("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"h-20 w-20 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center",children:a.jsx("span",{className:"text-primary font-bold text-2xl",children:s.name.split(" ").map(e=>e[0]).join("")})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.name,"Y"===s.relegated&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold",children:"R"}),a.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full"})]})]}),a.jsx(k.default,{href:`/cadets/${t}/edit`,className:"inline-flex items-center justify-center p-2 text-gray-400 hover:text-primary hover:bg-primary/10 rounded-lg transition-colors",title:"Edit cadet information",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-4",children:[a.jsx(c,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[s.company," Company, ",s.battalion]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(n.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Join Date"}),a.jsx("p",{className:"text-sm font-medium",children:new Date(s.joinDate).toLocaleDateString()})]})]}),s.academyNumber&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Academy Number"}),a.jsx("p",{className:"text-sm font-medium",children:s.academyNumber})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Medical Records"}),a.jsx("p",{className:"text-sm font-medium",children:C.length})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"h-4 w-4 text-red-500"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total Days Missed"}),a.jsx("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:L})]})]})]}),(s.height||s.weight||s.age||s.course||s.sex||s.academyNumber)&&(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Demographics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[s.height&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Height"}),(0,a.jsxs)("p",{className:"text-sm font-medium",children:[s.height," cm"]})]})]}),s.weight&&(0,a.jsxs)("div",{className:"flex items-center gap-2 group",children:[a.jsx(h,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Weight"}),P?(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("input",{type:"number",value:R,onChange:e=>T(e.target.value),className:"text-sm px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white w-20",placeholder:"kg",min:"0",disabled:_}),a.jsx("button",{onClick:I,disabled:_,className:"p-1 text-green-600 hover:text-green-700 disabled:opacity-50",title:"Save weight",children:_?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-green-600"}):a.jsx(p.Z,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>{M(!1),T(s.weight?.toString()||"")},disabled:_,className:"p-1 text-red-600 hover:text-red-700 disabled:opacity-50",title:"Cancel editing",children:a.jsx(g.Z,{className:"h-3 w-3"})})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[s.weight," kg"]}),a.jsx("button",{onClick:()=>M(!0),className:"opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-primary transition-opacity",title:"Edit weight",children:a.jsx(u.Z,{className:"h-3 w-3"})})]})]})]}),s.age&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(j.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Age"}),(0,a.jsxs)("p",{className:"text-sm font-medium",children:[s.age," years"]})]})]}),s.course&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(y,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Course"}),a.jsx("p",{className:"text-sm font-medium",children:s.course})]})]}),s.sex&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(N.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Sex"}),a.jsx("p",{className:"text-sm font-medium",children:s.sex})]})]})]})]}),!(s.height||s.weight||s.age||s.course||s.sex||s.academyNumber)&&a.jsx("div",{className:"mt-6"})]})]})})}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Medical History"}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx(k.default,{href:`/medical-records/new?cadetId=${t}`,className:"inline-flex items-center justify-center p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",title:"Add another medical record",children:a.jsx(f.Z,{className:"h-4 w-4"})})})]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:["Complete medical record history for ",s.name]})]})})}),a.jsx("div",{className:"p-6",children:0===C.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(v.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Medical Records"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"This cadet has no medical records yet."})]}):a.jsx(w.Z,{records:C,cadetId:t,showAll:!0})})]})]})})}},2141:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/ankushjha/Desktop/CURACADET/src/app/cadets/[id]/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,471,244,642],()=>s(2571));module.exports=a})();