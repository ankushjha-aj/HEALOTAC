(()=>{var e={};e.id=749,e.ids=[749],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>h,tree:()=>c}),t(4407),t(2029),t(5866);var a=t(3191),r=t(8716),i=t(7922),l=t.n(i),d=t(5231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let c=["",{children:["medical-history",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4407)),"/Users/ankushjha/Desktop/CURACADET/src/app/medical-history/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"/Users/ankushjha/Desktop/CURACADET/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],x=["/Users/ankushjha/Desktop/CURACADET/src/app/medical-history/[id]/page.tsx"],o="/medical-history/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/medical-history/[id]/page",pathname:"/medical-history/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1245:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,9404,23)),Promise.resolve().then(t.bind(t,80))},4407:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(9510),r=t(8585),i=t(8630),l=t(9755),d=t(71);let n=(0,t(7162).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var c=t(1112),x=t(2688),o=t(4120),m=t(7371);async function h({params:e}){let s=parseInt(e.id);isNaN(s)&&(0,r.notFound)();try{let e=await fetch(`${process.env.NEXTAUTH_URL||"http://localhost:3000"}/api/medical-history/${s}`,{cache:"no-store"});if(!e.ok)throw 404===e.status&&(0,r.notFound)(),Error(`Failed to fetch medical history: ${e.status}`);let{cadet:t,records:h}=await e.json();return a.jsx(i.Z,{children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:(0,a.jsxs)(m.default,{href:"/dashboard",className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[a.jsx(l.Z,{className:"h-4 w-4"}),"Back to Dashboard"]})}),a.jsx("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center",children:a.jsx("span",{className:"text-primary font-bold text-xl",children:t.name.split(" ").map(e=>e[0]).join("")})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t.name}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(d.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[t.company," Company, ",t.battalion]})]}),t.contactNo&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(n,{className:"h-4 w-4"}),a.jsx("span",{children:t.contactNo})]})]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Total Records"}),a.jsx("div",{className:"text-2xl font-bold text-primary",children:h.length}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Cadet ID: ",s]})]})]})}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Medical History Timeline"}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Complete medical record history for ",t.name]})]}),a.jsx("div",{className:"p-6",children:0===h.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(c.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Medical Records"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This cadet has no medical records yet."})]}):a.jsx("div",{className:"space-y-6",children:h.map((e,s)=>(0,a.jsxs)("div",{className:"relative",children:[s<h.length-1&&a.jsx("div",{className:"absolute left-6 top-16 w-0.5 h-full bg-gray-200 dark:bg-gray-700"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[a.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ${"Active"===e.status?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400":"Completed"===e.status?"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-900/20 text-gray-600 dark:text-gray-400"}`,children:a.jsx(c.Z,{className:"h-5 w-5"})}),a.jsx("div",{className:"flex-1 pb-8",children:(0,a.jsxs)("div",{className:"card p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.medicalProblem}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx("span",{children:new Date(e.dateOfReporting).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(o.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Created ",new Date(e.createdAt).toLocaleDateString()]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"Active"===e.status?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"Completed"===e.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:e.status}),e.monitoringCase&&a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",children:"Monitoring Case"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.diagnosis&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Diagnosis"}),a.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:e.diagnosis})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Details"}),(0,a.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white mt-1 space-y-1",children:[(0,a.jsxs)("div",{children:["Attend C: ",e.attendC]}),(e.trainingDaysMissed??0)>0&&(0,a.jsxs)("div",{children:["Training Days Missed: ",e.trainingDaysMissed]})]})]})]}),e.remarks&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Remarks"}),a.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:e.remarks})]})]})})]})]},e.id))})})]}),h.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"card p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:h.filter(e=>"Active"===e.status).length}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Cases"})]}),(0,a.jsxs)("div",{className:"card p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-1",children:h.filter(e=>"Completed"===e.status).length}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed Cases"})]}),(0,a.jsxs)("div",{className:"card p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:h.reduce((e,s)=>e+(s.trainingDaysMissed??0),0)}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Training Days Missed"})]})]})]})})}catch(e){console.error("Error loading medical history:",e),(0,r.notFound)()}}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,471,244,612],()=>t(14));module.exports=a})();