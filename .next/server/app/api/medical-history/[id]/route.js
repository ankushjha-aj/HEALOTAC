"use strict";(()=>{var e={};e.id=829,e.ids=[829],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1450:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>f,patchFetch:()=>N,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var r={};a.r(r),a.d(r,{GET:()=>c});var o=a(9303),n=a(8716),d=a(670),i=a(7070),l=a(5748),s=a(7327),u=a(7745);async function c(e,{params:t}){try{let e=parseInt(t.id);if(isNaN(e))return i.NextResponse.json({error:"Invalid cadet ID"},{status:400});let a=await l.db.select().from(s.VV).where((0,u.eq)(s.VV.id,e)).limit(1);if(0===a.length)return i.NextResponse.json({error:"Cadet not found"},{status:404});let r={...a[0],joinDate:a[0].joinDate.toISOString(),createdAt:a[0].createdAt.toISOString()},o=await l.db.select().from(s.HH).where((0,u.eq)(s.HH.cadetId,e)).orderBy(s.HH.dateOfReporting);return i.NextResponse.json({cadet:r,records:o.map(e=>({...e,dateOfReporting:e.dateOfReporting.toISOString(),createdAt:e.createdAt.toISOString()}))})}catch(e){return console.error("âŒ Error fetching medical history:",e),i.NextResponse.json({error:"Failed to fetch medical history"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/medical-history/[id]/route",pathname:"/api/medical-history/[id]",filename:"route",bundlePath:"app/api/medical-history/[id]/route"},resolvedPagePath:"/Users/ankushjha/Desktop/CURACADET/src/app/api/medical-history/[id]/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:g}=p,f="/api/medical-history/[id]/route";function N(){return(0,d.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},5748:(e,t,a)=>{a.d(t,{db:()=>d});var r=a(2237),o=a(9802);let n=(0,r.qn)(process.env.DATABASE_URL),d=(0,o.tS)(n)},7327:(e,t,a)=>{a.d(t,{HH:()=>p,VV:()=>c,rC:()=>u});var r=a(3733),o=a(5961),n=a(1401),d=a(2140),i=a(1575),l=a(2941),s=a(8748);let u=(0,r.af)("users",{id:(0,o.eP)("id").primaryKey(),username:(0,n.L7)("username",{length:50}).unique().notNull(),password:(0,d.fL)("password").notNull(),email:(0,n.L7)("email",{length:255}),role:(0,n.L7)("role",{length:20}).default("user").notNull(),createdAt:(0,i.AB)("created_at").defaultNow().notNull(),updatedAt:(0,i.AB)("updated_at").defaultNow().notNull()}),c=(0,r.af)("cadets",{id:(0,o.eP)("id").primaryKey(),name:(0,n.L7)("name",{length:255}).notNull(),battalion:(0,n.L7)("battalion",{length:100}).notNull(),company:(0,n.L7)("company",{length:50}).notNull(),joinDate:(0,i.AB)("join_date").notNull(),status:(0,n.L7)("status",{length:20}).default("Active").notNull(),healthStatus:(0,n.L7)("health_status",{length:20}).default("Fit").notNull(),academyNumber:(0,l._L)("academy_number"),height:(0,l._L)("height"),weight:(0,l._L)("weight"),age:(0,l._L)("age"),course:(0,n.L7)("course",{length:100}),sex:(0,n.L7)("sex",{length:10}),createdAt:(0,i.AB)("created_at").defaultNow().notNull(),updatedAt:(0,i.AB)("updated_at").defaultNow().notNull()}),p=(0,r.af)("medical_records",{id:(0,o.eP)("id").primaryKey(),cadetId:(0,l._L)("cadet_id").references(()=>c.id).notNull(),dateOfReporting:(0,i.AB)("date_of_reporting").notNull(),medicalProblem:(0,d.fL)("medical_problem").notNull(),diagnosis:(0,d.fL)("diagnosis"),status:(0,n.L7)("status",{length:20}).default("Active").notNull(),attendC:(0,l._L)("attend_c").default(0).notNull(),trainingDaysMissed:(0,l._L)("training_days_missed").default(0),monitoringCase:(0,s.O7)("monitoring_case").default(!1).notNull(),contactNo:(0,n.L7)("contact_no",{length:20}),remarks:(0,d.fL)("remarks"),createdAt:(0,i.AB)("created_at").defaultNow().notNull(),updatedAt:(0,i.AB)("updated_at").defaultNow().notNull()})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948,351],()=>a(1450));module.exports=r})();