"use strict";(()=>{var e={};e.id=318,e.ids=[318],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6918:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>_,patchFetch:()=>L,requestAsyncStorage:()=>f,routeModule:()=>g,serverHooks:()=>h,staticGenerationAsyncStorage:()=>N});var a={};r.r(a),r.d(a,{DELETE:()=>m,GET:()=>c,PUT:()=>p});var o=r(9303),d=r(8716),n=r(670),l=r(7070),i=r(5748),s=r(7327),u=r(7745);async function c(e,{params:t}){try{let[e]=await i.db.select().from(s.HH).where((0,u.eq)(s.HH.id,parseInt(t.id))).limit(1);if(!e)return l.NextResponse.json({error:"Medical record not found"},{status:404});return l.NextResponse.json(e)}catch(e){return console.error("❌ Error fetching medical record:",e),l.NextResponse.json({error:"Failed to fetch medical record"},{status:500})}}async function p(e,{params:t}){try{let{cadetId:r,dateOfReporting:a,medicalProblem:o,diagnosis:d,medicalStatus:n,attendC:c,miDetained:p,totalTrainingDaysMissed:m,monitoringCase:g,contactNo:f,remarks:N}=await e.json(),[h]=await i.db.update(s.HH).set({cadetId:r?parseInt(r):void 0,dateOfReporting:a?new Date(a):void 0,medicalProblem:o,diagnosis:d,medicalStatus:n,attendC:void 0!==c?parseInt(c):void 0,miDetained:void 0!==p?parseInt(p):void 0,totalTrainingDaysMissed:void 0!==m?parseInt(m):void 0,monitoringCase:g,contactNo:f,remarks:N,updatedAt:new Date}).where((0,u.eq)(s.HH.id,parseInt(t.id))).returning();if(!h)return l.NextResponse.json({error:"Medical record not found"},{status:404});return console.log("\uD83D\uDD04 UPDATED MEDICAL RECORD:",h),l.NextResponse.json(h)}catch(e){return console.error("❌ Error updating medical record:",e),l.NextResponse.json({error:"Failed to update medical record"},{status:500})}}async function m(e,{params:t}){try{let[e]=await i.db.delete(s.HH).where((0,u.eq)(s.HH.id,parseInt(t.id))).returning();if(!e)return l.NextResponse.json({error:"Medical record not found"},{status:404});return console.log("\uD83D\uDDD1️ DELETED MEDICAL RECORD:",e),l.NextResponse.json({message:"Medical record deleted successfully"})}catch(e){return console.error("❌ Error deleting medical record:",e),l.NextResponse.json({error:"Failed to delete medical record"},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:d.x.APP_ROUTE,page:"/api/medical-records/[id]/route",pathname:"/api/medical-records/[id]",filename:"route",bundlePath:"app/api/medical-records/[id]/route"},resolvedPagePath:"/Users/ankushjha/Desktop/CURACADET/src/app/api/medical-records/[id]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:N,serverHooks:h}=g,_="/api/medical-records/[id]/route";function L(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:N})}},5748:(e,t,r)=>{r.d(t,{db:()=>n});var a=r(2237),o=r(9802);let d=(0,a.qn)(process.env.DATABASE_URL),n=(0,o.tS)(d)},7327:(e,t,r)=>{r.d(t,{HH:()=>p,VV:()=>c,rC:()=>u});var a=r(3733),o=r(5961),d=r(1401),n=r(2140),l=r(1575),i=r(2941),s=r(8748);let u=(0,a.af)("users",{id:(0,o.eP)("id").primaryKey(),username:(0,d.L7)("username",{length:50}).unique().notNull(),password:(0,n.fL)("password").notNull(),email:(0,d.L7)("email",{length:255}),role:(0,d.L7)("role",{length:20}).default("user").notNull(),createdAt:(0,l.AB)("created_at").defaultNow().notNull(),updatedAt:(0,l.AB)("updated_at").defaultNow().notNull()}),c=(0,a.af)("cadets",{id:(0,o.eP)("id").primaryKey(),name:(0,d.L7)("name",{length:255}).notNull(),battalion:(0,d.L7)("battalion",{length:100}).notNull(),company:(0,d.L7)("company",{length:50}).notNull(),joinDate:(0,l.AB)("join_date").notNull(),academyNumber:(0,i._L)("academy_number"),height:(0,i._L)("height"),weight:(0,i._L)("weight"),age:(0,i._L)("age"),course:(0,d.L7)("course",{length:100}),sex:(0,d.L7)("sex",{length:10}),relegated:(0,d.L7)("relegated",{length:1}).default("N").notNull(),createdAt:(0,l.AB)("created_at").defaultNow().notNull(),updatedAt:(0,l.AB)("updated_at").defaultNow().notNull()}),p=(0,a.af)("medical_records",{id:(0,o.eP)("id").primaryKey(),cadetId:(0,i._L)("cadet_id").references(()=>c.id).notNull(),dateOfReporting:(0,l.AB)("date_of_reporting").notNull(),medicalProblem:(0,n.fL)("medical_problem").notNull(),diagnosis:(0,n.fL)("diagnosis"),medicalStatus:(0,d.L7)("medical_status",{length:20}).default("Active").notNull(),attendC:(0,i._L)("attend_c").default(0).notNull(),miDetained:(0,i._L)("mi_detained").default(0).notNull(),exPpg:(0,i._L)("ex_ppg").default(0).notNull(),attendB:(0,i._L)("attend_b").default(0).notNull(),physiotherapy:(0,i._L)("physiotherapy").default(0).notNull(),totalTrainingDaysMissed:(0,i._L)("total_training_days_missed").default(0).notNull(),monitoringCase:(0,s.O7)("monitoring_case").default(!1).notNull(),contactNo:(0,d.L7)("contact_no",{length:20}),remarks:(0,n.fL)("remarks"),createdAt:(0,l.AB)("created_at").defaultNow().notNull(),updatedAt:(0,l.AB)("updated_at").defaultNow().notNull()})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,351],()=>r(6918));module.exports=a})();