"use strict";(()=>{var t={};t.id=209,t.ids=[209],t.modules={399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1910:(t,e,a)=>{a.r(e),a.d(e,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var n={};a.r(n),a.d(n,{GET:()=>d});var s=a(9303),o=a(8716),l=a(670),r=a(7070),u=a(5748),i=a(7327);async function d(){try{let t=await u.db.select().from(i.VV),e=[...new Set(t.map(t=>t.battalion))].sort(),a=[...new Set(t.map(t=>t.company))].sort(),n=[...new Set(t.map(t=>t.status))].sort(),s=[...new Set(t.map(t=>t.healthStatus))].sort(),o=t.reduce((t,e)=>(t[e.battalion]||(t[e.battalion]=[]),t[e.battalion].includes(e.company)||t[e.battalion].push(e.company),t),{});Object.keys(o).forEach(t=>{o[t].sort()});let l={battalions:e,companies:a,statuses:n,healthStatuses:s,companiesByBattalion:o};return console.log("\uD83D\uDCCA FETCHED FILTERS FROM DATABASE:",{battalions:l.battalions.length,companies:l.companies.length,statuses:l.statuses.length,healthStatuses:l.healthStatuses.length,battalionsList:l.battalions,totalCadets:t.length}),r.NextResponse.json(l)}catch(t){return console.error("âŒ Error fetching filters from database:",t),console.log("\uD83D\uDCCA RETURNING EMPTY FILTERS (database error or no data)"),r.NextResponse.json({battalions:[],companies:[],statuses:[],healthStatuses:[],companiesByBattalion:{}})}}let c=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/cadets/filters/route",pathname:"/api/cadets/filters",filename:"route",bundlePath:"app/api/cadets/filters/route"},resolvedPagePath:"/Users/ankushjha/Desktop/CURACADET/src/app/api/cadets/filters/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:m}=c,g="/api/cadets/filters/route";function f(){return(0,l.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}},5748:(t,e,a)=>{a.d(e,{db:()=>l});var n=a(2237),s=a(9802);let o=(0,n.qn)(process.env.DATABASE_URL),l=(0,s.tS)(o)},7327:(t,e,a)=>{a.d(e,{HH:()=>p,VV:()=>c,rC:()=>d});var n=a(3733),s=a(5961),o=a(1401),l=a(2140),r=a(1575),u=a(2941),i=a(8748);let d=(0,n.af)("users",{id:(0,s.eP)("id").primaryKey(),username:(0,o.L7)("username",{length:50}).unique().notNull(),password:(0,l.fL)("password").notNull(),email:(0,o.L7)("email",{length:255}),role:(0,o.L7)("role",{length:20}).default("user").notNull(),createdAt:(0,r.AB)("created_at").defaultNow().notNull(),updatedAt:(0,r.AB)("updated_at").defaultNow().notNull()}),c=(0,n.af)("cadets",{id:(0,s.eP)("id").primaryKey(),name:(0,o.L7)("name",{length:255}).notNull(),battalion:(0,o.L7)("battalion",{length:100}).notNull(),company:(0,o.L7)("company",{length:50}).notNull(),joinDate:(0,r.AB)("join_date").notNull(),status:(0,o.L7)("status",{length:20}).default("Active").notNull(),healthStatus:(0,o.L7)("health_status",{length:20}).default("Fit").notNull(),academyNumber:(0,u._L)("academy_number"),height:(0,u._L)("height"),weight:(0,u._L)("weight"),age:(0,u._L)("age"),course:(0,o.L7)("course",{length:100}),sex:(0,o.L7)("sex",{length:10}),createdAt:(0,r.AB)("created_at").defaultNow().notNull(),updatedAt:(0,r.AB)("updated_at").defaultNow().notNull()}),p=(0,n.af)("medical_records",{id:(0,s.eP)("id").primaryKey(),cadetId:(0,u._L)("cadet_id").references(()=>c.id).notNull(),dateOfReporting:(0,r.AB)("date_of_reporting").notNull(),medicalProblem:(0,l.fL)("medical_problem").notNull(),diagnosis:(0,l.fL)("diagnosis"),status:(0,o.L7)("status",{length:20}).default("Active").notNull(),attendC:(0,u._L)("attend_c").default(0).notNull(),trainingDaysMissed:(0,u._L)("training_days_missed").default(0),monitoringCase:(0,i.O7)("monitoring_case").default(!1).notNull(),contactNo:(0,o.L7)("contact_no",{length:20}),remarks:(0,l.fL)("remarks"),createdAt:(0,r.AB)("created_at").defaultNow().notNull(),updatedAt:(0,r.AB)("updated_at").defaultNow().notNull()})}};var e=require("../../../../webpack-runtime.js");e.C(t);var a=t=>e(e.s=t),n=e.X(0,[276,351],()=>a(1910));module.exports=n})();