"use strict";(()=>{var e={};e.id=209,e.ids=[209],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1910:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var l={};a.r(l),a.d(l,{GET:()=>u});var o=a(9303),n=a(8716),r=a(670),d=a(7070),s=a(5748),i=a(7327);async function u(){try{let e=await s.db.select().from(i.VV),t=[...new Set(e.map(e=>e.battalion))].sort(),a=[...new Set(e.map(e=>e.company))].sort(),l=e.reduce((e,t)=>(e[t.battalion]||(e[t.battalion]=[]),e[t.battalion].includes(t.company)||e[t.battalion].push(t.company),e),{});Object.keys(l).forEach(e=>{l[e].sort()});let o={battalions:t,companies:a,companiesByBattalion:l};return console.log("\uD83D\uDCCA FETCHED FILTERS FROM DATABASE:",{battalions:o.battalions.length,companies:o.companies.length,battalionsList:o.battalions,totalCadets:e.length}),d.NextResponse.json(o)}catch(e){return console.error("âŒ Error fetching filters from database:",e),console.log("\uD83D\uDCCA RETURNING EMPTY FILTERS (database error or no data)"),d.NextResponse.json({battalions:[],companies:[],companiesByBattalion:{}})}}let c=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/cadets/filters/route",pathname:"/api/cadets/filters",filename:"route",bundlePath:"app/api/cadets/filters/route"},resolvedPagePath:"/Users/ankushjha/Desktop/CURACADET/src/app/api/cadets/filters/route.ts",nextConfigOutput:"",userland:l}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:g}=c,f="/api/cadets/filters/route";function h(){return(0,r.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},5748:(e,t,a)=>{a.d(t,{db:()=>r});var l=a(2237),o=a(9802);let n=(0,l.qn)(process.env.DATABASE_URL),r=(0,o.tS)(n)},7327:(e,t,a)=>{a.d(t,{HH:()=>p,VV:()=>c,rC:()=>u});var l=a(3733),o=a(5961),n=a(1401),r=a(2140),d=a(1575),s=a(2941),i=a(8748);let u=(0,l.af)("users",{id:(0,o.eP)("id").primaryKey(),username:(0,n.L7)("username",{length:50}).unique().notNull(),password:(0,r.fL)("password").notNull(),email:(0,n.L7)("email",{length:255}),role:(0,n.L7)("role",{length:20}).default("user").notNull(),createdAt:(0,d.AB)("created_at").defaultNow().notNull(),updatedAt:(0,d.AB)("updated_at").defaultNow().notNull()}),c=(0,l.af)("cadets",{id:(0,o.eP)("id").primaryKey(),name:(0,n.L7)("name",{length:255}).notNull(),battalion:(0,n.L7)("battalion",{length:100}).notNull(),company:(0,n.L7)("company",{length:50}).notNull(),joinDate:(0,d.AB)("join_date").notNull(),academyNumber:(0,s._L)("academy_number"),height:(0,s._L)("height"),weight:(0,s._L)("weight"),age:(0,s._L)("age"),course:(0,n.L7)("course",{length:100}),sex:(0,n.L7)("sex",{length:10}),relegated:(0,n.L7)("relegated",{length:1}).default("N").notNull(),createdAt:(0,d.AB)("created_at").defaultNow().notNull(),updatedAt:(0,d.AB)("updated_at").defaultNow().notNull()}),p=(0,l.af)("medical_records",{id:(0,o.eP)("id").primaryKey(),cadetId:(0,s._L)("cadet_id").references(()=>c.id).notNull(),dateOfReporting:(0,d.AB)("date_of_reporting").notNull(),medicalProblem:(0,r.fL)("medical_problem").notNull(),diagnosis:(0,r.fL)("diagnosis"),medicalStatus:(0,n.L7)("medical_status",{length:20}).default("Active").notNull(),attendC:(0,s._L)("attend_c").default(0).notNull(),miDetained:(0,s._L)("mi_detained").default(0).notNull(),exPpg:(0,s._L)("ex_ppg").default(0).notNull(),attendB:(0,s._L)("attend_b").default(0).notNull(),physiotherapy:(0,s._L)("physiotherapy").default(0).notNull(),totalTrainingDaysMissed:(0,s._L)("total_training_days_missed").default(0).notNull(),monitoringCase:(0,i.O7)("monitoring_case").default(!1).notNull(),contactNo:(0,n.L7)("contact_no",{length:20}),remarks:(0,r.fL)("remarks"),createdAt:(0,d.AB)("created_at").defaultNow().notNull(),updatedAt:(0,d.AB)("updated_at").defaultNow().notNull()})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),l=t.X(0,[276,351],()=>a(1910));module.exports=l})();