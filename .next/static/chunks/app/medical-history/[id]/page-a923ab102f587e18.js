(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[749],{2671:function(e,t,s){Promise.resolve().then(s.bind(s,5690))},5690:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(7437),r=s(9376),i=s(9893),l=s(2660),c=s(7648),d=s(6663),n=s(2265);function x(e){let{params:t}=e,s=parseInt(t.id),[x,o]=(0,n.useState)(null),[m,h]=(0,n.useState)([]),[f,y]=(0,n.useState)(!0),[j,u]=(0,n.useState)(null),p=(0,n.useCallback)(async()=>{try{y(!0),u(null);let[e,t]=await Promise.all([fetch("/api/cadets/".concat(s),{credentials:"include"}),fetch("/api/medical-history/".concat(s),{credentials:"include"})]);if(!e.ok)throw Error("Failed to fetch cadet");let a=await e.json(),{records:r}=t.ok?await t.json():{records:[]};o(a),h(r)}catch(e){console.error("Error loading medical history:",e),u(e instanceof Error?e.message:"Failed to load medical history")}finally{y(!1)}},[s]);return((0,n.useEffect)(()=>{if(isNaN(s)){(0,r.notFound)();return}p()},[s,p]),f)?(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):j||!x?(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:j||"Medical history not found"}),(0,a.jsx)(c.default,{href:"/medical-history",className:"text-primary hover:text-primary/80",children:"Return to Medical History"})]})})}):(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)(c.default,{href:"/medical-history",className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),"Back to Medical History"]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"h-16 w-16 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-primary font-bold text-xl",children:x.name.split(" ").map(e=>e[0]).join("")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:x.name}),(0,a.jsx)("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{children:[x.company," Company, ",x.battalion]})})})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Total Records"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-primary",children:m.length})]})]})}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Medical History Timeline"}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Complete medical record history for ",x.name]})]})})}),(0,a.jsx)("div",{className:"p-6",children:0===m.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Medical Records"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"This cadet has no medical records yet."})]}):(0,a.jsx)(d.Z,{records:m,cadetId:s,showAll:!0})})]})]})})}}},function(e){e.O(0,[631,196,971,117,744],function(){return e(e.s=2671)}),_N_E=e.O()}]);