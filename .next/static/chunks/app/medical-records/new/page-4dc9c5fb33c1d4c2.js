(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{7119:function(e,t,a){Promise.resolve().then(a.bind(a,5236))},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5236:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x},dynamic:function(){return m}});var r=a(7437),s=a(2265),n=a(9376),l=a(9893),d=a(7648),i=a(9397),o=a(2369),c=a(2489);let m="force-dynamic";function h(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[a,m]=(0,s.useState)(!1),[h,x]=(0,s.useState)([]),[g,u]=(0,s.useState)(!0),[p,b]=(0,s.useState)(!1),[y,f]=(0,s.useState)(!1),[j,N]=(0,s.useState)(""),[k,v]=(0,s.useState)(!1),[C,w]=(0,s.useState)(null),[D,S]=(0,s.useState)({cadetId:"",dateOfReporting:"",medicalProblem:"",diagnosis:"",status:"Active",trainingType:"none",trainingDays:"0",exPpg:"0",attendB:"0",physiotherapy:"0",contactNo:"",remarks:"",monitoringCase:"No",weight:""}),[E,A]=(0,s.useState)({name:"",battalion:"",company:"",joinDate:"",academyNumber:"",height:"",weight:"",age:"",course:"",sex:"",relegated:"N"}),[I,P]=(0,s.useState)(null),[T,R]=(0,s.useState)(null),[F,M]=(0,s.useState)({});(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("jwt_token");if(console.log("\uD83D\uDD11 CADETS API - JWT TOKEN:",e?"Token found":"No token found"),!e){R("Authentication required"),u(!1);return}let t=await fetch("/api/cadets",{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("\uD83D\uDCE1 CADETS API RESPONSE STATUS:",t.status),t.ok){let e=await t.json();console.log("✅ CADETS FETCHED:",e.length,"cadets"),x(e)}else if(401===t.status)console.error("❌ CADETS API: Authentication failed"),R("Authentication required");else{let e=await t.json();throw console.error("❌ CADETS API ERROR:",e),Error("Failed to fetch cadets")}}catch(e){console.error("Error fetching cadets:",e),R(e instanceof Error?e.message:"Failed to fetch cadets")}finally{u(!1)}})()},[]),(0,s.useEffect)(()=>{let e=t.get("cadetId");if(e&&!C){let t=parseInt(e),a=h.find(e=>e.id===t);a?(console.log("\uD83D\uDD0D Pre-selecting cadet from URL (found in loaded cadets):",a.name,"(ID:",t,")"),L(a)):h.length>0?console.warn("⚠️ Cadet with ID",t,"not found in cadets list"):(console.log("\uD83D\uDCE1 Cadets not loaded yet, fetching specific cadet:",t),fetch("/api/cadets/".concat(t)).then(e=>e.json()).then(e=>{e&&!e.error?(console.log("✅ Fetched cadet from API:",e.name),L({id:e.id,name:e.name,company:e.company,battalion:e.battalion,relegated:e.relegated||"N"})):console.warn("⚠️ Cadet not found in API:",t)}).catch(e=>{console.error("❌ Error fetching cadet:",e)}))}},[h,t,C]),(0,s.useEffect)(()=>{!t.get("cadetId")||g||0!==h.length||C||console.log("\uD83D\uDCE1 Cadets not loaded yet, will retry selection when they load")},[g,h.length,t,C]);let O=e=>{let{name:t,value:a}=e.target;S(e=>{let r={...e,[t]:a};return"trainingType"===t&&("none"===a?r.trainingDays="0":a!==e.trainingType&&(r.trainingDays="0")),r})},L=e=>{w(e),N("".concat(e.name," - ").concat(e.company," Company, ").concat(e.battalion)),S(t=>({...t,cadetId:e.id.toString()})),v(!1)},Z=h.filter(e=>""!==j.trim()&&(e.name.toLowerCase().includes(j.toLowerCase())||e.company.toLowerCase().includes(j.toLowerCase())||e.battalion.toLowerCase().includes(j.toLowerCase()))),B=e=>{let{name:t,value:a}=e.target;A(e=>({...e,[t]:a}))},q=async e=>{e.preventDefault(),P(null),f(!0);try{let e=localStorage.getItem("jwt_token");if(!e){P("Authentication required");return}let t=await fetch("/api/cadets",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(E)}),a=await t.json();t.ok?(console.log("✅ CREATED CADET:",a),x(e=>[...e,a]),S(e=>({...e,cadetId:a.id.toString()})),b(!1),A({name:"",battalion:"",company:"",joinDate:"",academyNumber:"",height:"",weight:"",age:"",course:"",sex:"",relegated:"N"}),alert("Cadet added successfully!")):P(a.error||"Failed to add cadet")}catch(e){console.error("❌ Error adding cadet:",e),P(e instanceof Error?e.message:"Network error. Please try again.")}finally{f(!1)}},W=()=>{let e={};return D.cadetId&&""!==D.cadetId.trim()||(e.cadetId="Please select a cadet"),D.dateOfReporting||(e.dateOfReporting="Date of reporting is required"),D.medicalProblem.trim()||(e.medicalProblem="Medical problem description is required"),!D.cadetId||C||h.find(e=>e.id.toString()===D.cadetId)||(e.cadetId="Selected cadet is not valid"),M(e),0===Object.keys(e).length},_=async t=>{if(t.preventDefault(),W()){R(null),m(!0);try{let t=localStorage.getItem("jwt_token");if(console.log("\uD83D\uDD11 JWT TOKEN RETRIEVED:",t?"Token found":"No token found"),!t){R("Authentication required");return}let a={cadetId:D.cadetId,dateOfReporting:D.dateOfReporting,medicalProblem:D.medicalProblem,diagnosis:D.diagnosis,medicalStatus:D.status,attendC:"attendC"===D.trainingType?parseInt(D.trainingDays):0,miDetained:"miDetained"===D.trainingType?parseInt(D.trainingDays):0,exPpg:parseInt(D.exPpg),attendB:parseInt(D.attendB),physiotherapy:parseInt(D.physiotherapy),totalTrainingDaysMissed:parseInt(D.trainingDays)||0,contactNo:D.contactNo,remarks:D.remarks,monitoringCase:D.monitoringCase};console.log("\uD83D\uDCDD FRONTEND SENDING MEDICAL RECORD DATA:",a),console.log("\uD83D\uDC64 SELECTED CADET:",C);let r=await fetch("/api/medical-records",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}),s=await r.json();if(r.ok){if(console.log("✅ CREATED MEDICAL RECORD:",s),D.weight&&""!==D.weight.trim())try{(await fetch("/api/cadets/".concat(D.cadetId),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({weight:parseFloat(D.weight)})})).ok?console.log("✅ UPDATED CADET WEIGHT"):console.warn("⚠️ Failed to update cadet weight, but medical record was created")}catch(e){console.warn("⚠️ Error updating cadet weight:",e)}alert("Medical record added successfully!"),setTimeout(()=>{e.push("/cadets/".concat(D.cadetId,"?refresh=true"))},500)}else R(s.error||"Failed to add medical record")}catch(e){console.error("❌ Error adding medical record:",e),R(e instanceof Error?e.message:"Network error. Please try again.")}finally{m(!1)}}};return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Add Medical Record"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Record a new medical visit or treatment"})]}),(0,r.jsx)("div",{className:"card p-6",children:(0,r.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[T&&(0,r.jsx)("div",{className:"p-3 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:T}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cadet Selection *"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{className:"flex-1 relative",children:g?(0,r.jsxs)("div",{className:"input-field flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary mr-2"}),"Loading cadets... ",t.get("cadetId")&&"Pre-selecting from cadet details..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"text",placeholder:"Search for existing cadet by name, company, or battalion...",value:j,onChange:e=>{let t=e.target.value;N(t),v(t.trim().length>0),t.trim()||(w(null),S(e=>({...e,cadetId:""})))},onFocus:()=>{v(j.trim().length>0)},onBlur:()=>setTimeout(()=>v(!1),200),className:"input-field ".concat(F.cadetId?"border-red-500 focus:border-red-500 focus:ring-red-500":""),required:!!D.cadetId}),k&&Z.length>0&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-y-auto",children:Z.slice(0,10).map(e=>(0,r.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-600 last:border-b-0",onClick:()=>L(e),children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[e.name,"Y"===e.relegated&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-red-600 dark:text-red-400 font-bold",children:"R"}),(0,r.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.company," Company, ",e.battalion]})]},e.id))})]})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>b(!0),className:"btn-secondary text-sm px-3 py-1",title:"Add new cadet",children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})}),C&&(0,r.jsx)(d.default,{href:"/cadets/".concat(C.id,"/edit"),className:"btn-secondary text-sm px-3 py-1",title:"Edit selected cadet",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,r.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]})]}),F.cadetId&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:F.cadetId}),C&&(0,r.jsx)("div",{className:"mt-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium text-green-800 dark:text-green-400",children:"Selected:"})," ",(0,r.jsxs)("span",{className:"text-green-700 dark:text-green-300 flex items-center gap-2",children:[C.name,"Y"===C.relegated&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-red-600 dark:text-red-400 font-bold",children:"R"}),(0,r.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),"- ",C.company," Company, ",C.battalion]}),t.get("cadetId")&&(0,r.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"✓ Pre-selected from cadet details"})]})}),0===h.length&&!g&&(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:'No cadets available. Use "Add New" to create the first cadet.'})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"dateOfReporting",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date of reporting *"}),(0,r.jsx)("input",{type:"date",id:"dateOfReporting",name:"dateOfReporting",required:!0,value:D.dateOfReporting,onChange:O,className:"input-field ".concat(F.dateOfReporting?"border-red-500 focus:border-red-500 focus:ring-red-500":"")}),F.dateOfReporting&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:F.dateOfReporting})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"medicalProblem",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Medical Problem *"}),(0,r.jsx)("input",{type:"text",id:"medicalProblem",name:"medicalProblem",required:!0,value:D.medicalProblem,onChange:O,className:"input-field ".concat(F.medicalProblem?"border-red-500 focus:border-red-500 focus:ring-red-500":""),placeholder:"e.g., Ankle Sprain, Viral Fever"}),F.medicalProblem&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:F.medicalProblem})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weight (kg)"}),(0,r.jsx)("input",{type:"number",id:"weight",name:"weight",min:0,step:"0.1",value:D.weight,onChange:O,className:"input-field",placeholder:"e.g., 68.5"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"diagnosis",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prescription"}),(0,r.jsx)("textarea",{id:"diagnosis",name:"diagnosis",rows:3,value:D.diagnosis,onChange:O,className:"input-field",placeholder:"detailed prescription option"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Medical Status"}),(0,r.jsxs)("select",{id:"status",name:"medicalStatus",value:D.status,onChange:O,className:"input-field",children:[(0,r.jsx)("option",{value:"Active",children:"Active"}),(0,r.jsx)("option",{value:"Completed",children:"Completed"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Training Days"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("select",{name:"trainingType",value:D.trainingType,onChange:O,className:"input-field",children:[(0,r.jsx)("option",{value:"none",children:"None"}),(0,r.jsx)("option",{value:"attendC",children:"Attend C"}),(0,r.jsx)("option",{value:"miDetained",children:"MI Detained"})]}),"none"!==D.trainingType&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400 min-w-0",children:"attendC"===D.trainingType?"Attend C:":"MI Detained:"}),(0,r.jsx)("input",{type:"number",name:"trainingDays",min:"0",max:"attendC"===D.trainingType?"10":"30",value:D.trainingDays,onChange:O,className:"input-field flex-1",placeholder:"0"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"exPpg",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ex-PPG"}),(0,r.jsx)("input",{type:"number",id:"exPpg",name:"exPpg",min:"0",value:D.exPpg,onChange:O,className:"input-field",placeholder:"0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"attendB",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Attend B"}),(0,r.jsx)("input",{type:"number",id:"attendB",name:"attendB",min:"0",value:D.attendB,onChange:O,className:"input-field",placeholder:"0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"physiotherapy",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Physiotherapy"}),(0,r.jsx)("input",{type:"number",id:"physiotherapy",name:"physiotherapy",min:"0",value:D.physiotherapy,onChange:O,className:"input-field",placeholder:"0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"monitoringCase",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Monitoring Case"}),(0,r.jsxs)("select",{id:"monitoringCase",name:"monitoringCase",value:D.monitoringCase,onChange:O,className:"input-field",children:[(0,r.jsx)("option",{value:"No",children:"No"}),(0,r.jsx)("option",{value:"Yes",children:"Yes"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"contactNo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contact No."}),(0,r.jsx)("input",{type:"tel",id:"contactNo",name:"contactNo",value:D.contactNo,onChange:O,className:"input-field",placeholder:"Phone number"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"remarks",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Remarks"}),(0,r.jsx)("textarea",{id:"remarks",name:"remarks",rows:3,value:D.remarks,onChange:O,className:"input-field",placeholder:"Any additional remarks or observations"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(d.default,{href:"/dashboard",className:"btn-secondary",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:a,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Adding Record...":"Add Medical Record"})]})]})})]}),p&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5"}),"Add New Cadet"]}),(0,r.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)(c.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[I&&(0,r.jsx)("div",{className:"p-3 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:I}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"cadetName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name *"}),(0,r.jsx)("input",{type:"text",id:"cadetName",name:"name",required:!0,value:E.name,onChange:B,className:"input-field",placeholder:"Enter full name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"cadetBattalion",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Battalion *"}),(0,r.jsxs)("select",{id:"cadetBattalion",name:"battalion",required:!0,value:E.battalion,onChange:B,className:"input-field",children:[(0,r.jsx)("option",{value:"",children:"Select battalion..."}),(0,r.jsx)("option",{value:"Shivaji",children:"Shivaji"}),(0,r.jsx)("option",{value:"Ranjit Singh",children:"Ranjit Singh"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"cadetCompany",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company *"}),(0,r.jsxs)("select",{id:"cadetCompany",name:"company",required:!0,value:E.company,onChange:B,className:"input-field",children:[(0,r.jsx)("option",{value:"",children:"Select company..."}),(0,r.jsx)("option",{value:"M",children:"M"}),(0,r.jsx)("option",{value:"N",children:"N"}),(0,r.jsx)("option",{value:"Z",children:"Z"}),(0,r.jsx)("option",{value:"J",children:"J"}),(0,r.jsx)("option",{value:"K",children:"K"}),(0,r.jsx)("option",{value:"P",children:"P"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"academyNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Academy Number"}),(0,r.jsx)("input",{type:"number",id:"academyNumber",name:"academyNumber",value:E.academyNumber,onChange:B,className:"input-field",placeholder:"e.g., 12345",min:1})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"cadetJoinDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Join Date *"}),(0,r.jsx)("input",{type:"date",id:"cadetJoinDate",name:"joinDate",required:!0,value:E.joinDate,onChange:B,className:"input-field"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"height",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Height (cm)"}),(0,r.jsx)("input",{type:"number",id:"height",name:"height",min:0,value:E.height,onChange:B,className:"input-field",placeholder:"e.g., 175"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weight (kg)"}),(0,r.jsx)("input",{type:"number",id:"weight",name:"weight",min:0,value:E.weight,onChange:B,className:"input-field",placeholder:"e.g., 68"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Age"}),(0,r.jsx)("input",{type:"number",id:"age",name:"age",min:0,value:E.age,onChange:B,className:"input-field",placeholder:"e.g., 21"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"course",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course"}),(0,r.jsx)("input",{type:"number",id:"course",name:"course",min:1,value:E.course,onChange:B,className:"input-field",placeholder:"e.g., 1, 2, 3"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"sex",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sex"}),(0,r.jsxs)("select",{id:"sex",name:"sex",value:E.sex,onChange:B,className:"input-field",children:[(0,r.jsx)("option",{value:"",children:"Select..."}),(0,r.jsx)("option",{value:"Male",children:"Male"}),(0,r.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"relegated",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Relegated"}),(0,r.jsxs)("select",{id:"relegated",name:"relegated",value:E.relegated,onChange:B,className:"input-field",children:[(0,r.jsx)("option",{value:"N",children:"N"}),(0,r.jsx)("option",{value:"Y",children:"Y"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("button",{type:"button",onClick:()=>b(!1),className:"btn-secondary",disabled:y,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:y,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:y?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Adding Cadet..."]}):"Add Cadet"})]})]})]})})})]})}function x(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)(l.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}),children:(0,r.jsx)(h,{})})}},9893:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var r=a(7437),s=a(2265),n=a(9376),l=a(8293),d=a(2369),i=a(5929),o=a(7226);function c(){let[e,t]=(0,s.useState)("dark");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");if(e)t(e),document.documentElement.classList.toggle("dark","dark"===e),document.documentElement.classList.toggle("light","light"===e);else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t(e),document.documentElement.classList.toggle("dark","dark"===e),document.documentElement.classList.toggle("light","light"===e)}},[]),(0,r.jsx)("button",{onClick:()=>{let a="dark"===e?"light":"dark";t(a),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(a),localStorage.setItem("theme",a)},className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",title:"Switch to ".concat("dark"===e?"light":"dark"," mode"),children:"dark"===e?(0,r.jsx)(i.Z,{className:"h-5 w-5"}):(0,r.jsx)(o.Z,{className:"h-5 w-5"})})}let m=e=>{let{className:t=""}=e;return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,r.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),(0,r.jsx)("path",{d:"M9 9l6 6M15 9l-6 6",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M12 7v6",stroke:"currentColor",strokeWidth:"1.5"})]})};function h(){let[e,t]=(0,s.useState)("");return(0,s.useEffect)(()=>{let e=localStorage.getItem("user_info");if(e)try{let a=JSON.parse(e);t(a.username||a.name||"User")}catch(e){t("User")}},[]),(0,r.jsx)("header",{className:"border-b border-gray-200 dark:border-gray-700/50 bg-white dark:bg-gray-800/50",children:(0,r.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{className:"lg:hidden p-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,r.jsx)(l.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(m,{className:"w-8 h-8 text-primary"}),(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Medical Record for OTA Chennai"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(c,{}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Welcome, ",e||"User"]}),(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center",children:(0,r.jsx)(d.Z,{className:"h-5 w-5 text-primary"})})]})]})]})})})}var x=a(7648),g=a(4938),u=a(5805),p=a(4401),b=a(9397),y=a(8736),f=a(7692);let j=e=>{let{className:t=""}=e;return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,r.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),(0,r.jsx)("path",{d:"M9 9l6 6M15 9l-6 6",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M12 7v6",stroke:"currentColor",strokeWidth:"1.5"})]})},N=[{name:"Dashboard",href:"/dashboard",icon:g.Z},{name:"Cadet Records",href:"/cadets",icon:u.Z},{name:"Medical History",href:"/medical-history",icon:p.Z},{name:"Add Record",href:"/medical-records/new",icon:b.Z},{name:"Reports",href:"/reports",icon:y.Z}];function k(){let e=(0,n.usePathname)(),t=(0,n.useRouter)();return(0,r.jsxs)("aside",{className:"w-64 flex-col bg-white dark:bg-gray-800/50 border-r border-gray-200 dark:border-gray-700/50 p-4 hidden lg:flex",children:[(0,r.jsx)("div",{className:"flex flex-col gap-y-2 mb-8",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(j,{className:"w-8 h-8 text-primary"}),(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"HEALOTAC"})})]})}),(0,r.jsx)("nav",{className:"flex-1 flex flex-col gap-2",children:N.map(t=>{let a=t.icon,s=e===t.href;return(0,r.jsxs)(x.default,{href:t.href,className:"\n                flex items-center gap-3 rounded-lg px-3 py-2 font-medium\n                ".concat(s?"bg-primary/10 dark:bg-primary/20 text-primary dark:text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800","\n              "),children:[(0,r.jsx)(a,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:t.name})]},t.name)})}),(0,r.jsxs)("button",{onClick:()=>{localStorage.removeItem("jwt_token"),localStorage.removeItem("user_info"),t.push("/")},className:"flex items-center gap-3 rounded-lg px-3 py-2 font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 mt-auto",children:[(0,r.jsx)(f.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Logout"})]})]})}function v(e){let{children:t}=e,a=(0,n.useRouter)();return(0,s.useEffect)(()=>{localStorage.getItem("jwt_token")||a.push("/")},[a]),(0,r.jsxs)("div",{className:"flex min-h-screen",children:[(0,r.jsx)(k,{}),(0,r.jsx)("div",{className:"w-px bg-gray-200 dark:bg-gray-700/50"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsx)(h,{}),(0,r.jsx)("main",{className:"flex-1 p-6 lg:p-8 bg-background-light dark:bg-background-dark",children:t})]})]})}}},function(e){e.O(0,[631,971,117,744],function(){return e(e.s=7119)}),_N_E=e.O()}]);