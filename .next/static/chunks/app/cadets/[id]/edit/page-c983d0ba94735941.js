(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{7456:function(e,a,t){Promise.resolve().then(t.bind(t,5084))},2660:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3229:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9205).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},5084:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var r=t(7437),s=t(2265),l=t(9376),n=t(9893),i=t(2660),d=t(2369),o=t(3229),c=t(7648);function m(e){let{params:a}=e,t=(0,l.useRouter)(),m=parseInt(a.id),[h,x]=(0,s.useState)(null),[g,u]=(0,s.useState)(!0),[p,j]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null),[f,k]=(0,s.useState)({name:"",battalion:"",company:"",joinDate:"",height:"",weight:"",age:"",course:"",sex:""}),v=(0,s.useCallback)(async()=>{try{u(!0),y(null);let e=localStorage.getItem("jwt_token");if(!e){y("Authentication required");return}let a=await fetch("/api/cadets/".concat(m),{headers:{Authorization:"Bearer ".concat(e)}});a.ok||(0,l.notFound)();let t=await a.json();x(t),k({name:t.name||"",battalion:t.battalion||"",company:t.company||"",joinDate:t.joinDate?t.joinDate.split("T")[0]:"",height:t.height?t.height.toString():"",weight:t.weight?t.weight.toString():"",age:t.age?t.age.toString():"",course:t.course||"",sex:t.sex||""})}catch(e){console.error("Error fetching data:",e),y("Failed to load cadet data")}finally{u(!1)}},[m]);(0,s.useEffect)(()=>{v()},[m,v]);let N=e=>{let{name:a,value:t}=e.target;k(e=>({...e,[a]:t}))},w=async e=>{e.preventDefault(),j(!0),y(null);try{if(!f.name||!f.battalion||!f.company||!f.joinDate)throw Error("Name, battalion, company, and join date are required");let e=localStorage.getItem("jwt_token");if(!e)throw Error("Authentication required");let a={name:f.name,battalion:f.battalion,company:f.company,joinDate:f.joinDate,height:f.height?parseInt(f.height):void 0,weight:f.weight?parseInt(f.weight):void 0,age:f.age?parseInt(f.age):void 0,course:f.course||void 0,sex:f.sex||void 0},r=await fetch("/api/cadets/".concat(m),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(a)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to update cadet")}console.log("✅ CADET UPDATED SUCCESSFULLY"),t.push("/cadets/".concat(m))}catch(e){console.error("❌ Error updating cadet:",e),y(e instanceof Error?e.message:"Failed to update cadet")}finally{j(!1)}};return g?(0,r.jsx)(n.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading cadet data..."})]})})}):b&&!h?(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsxs)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error: ",b]}),(0,r.jsx)(c.default,{href:"/cadets",className:"btn-primary",children:"Back to Cadets"})]})}):(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)(c.default,{href:"/cadets/".concat(m),className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),"Back to Cadet Details"]})}),(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)(d.Z,{className:"h-6 w-6 text-primary"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Cadet Information"})]}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[b&&(0,r.jsx)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-600 dark:text-red-400",children:b})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Basic Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name *"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:f.name,onChange:N,className:"input-field",placeholder:"Enter full name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"joinDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Join Date *"}),(0,r.jsx)("input",{type:"date",id:"joinDate",name:"joinDate",value:f.joinDate,onChange:N,className:"input-field",required:!0})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Military Assignment"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"battalion",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Battalion *"}),(0,r.jsxs)("select",{id:"battalion",name:"battalion",value:f.battalion,onChange:N,className:"input-field",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Battalion"}),(0,r.jsx)("option",{value:"Shivaji",children:"Shivaji"}),(0,r.jsx)("option",{value:"Ranjit Singh",children:"Ranjit Singh"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company *"}),(0,r.jsxs)("select",{id:"company",name:"company",value:f.company,onChange:N,className:"input-field",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Company"}),(0,r.jsx)("option",{value:"M",children:"M"}),(0,r.jsx)("option",{value:"N",children:"N"}),(0,r.jsx)("option",{value:"Z",children:"Z"}),(0,r.jsx)("option",{value:"J",children:"J"}),(0,r.jsx)("option",{value:"K",children:"K"}),(0,r.jsx)("option",{value:"P",children:"P"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Demographics (Optional)"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"height",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Height (cm)"}),(0,r.jsx)("input",{type:"number",id:"height",name:"height",value:f.height,onChange:N,className:"input-field",placeholder:"e.g. 175",min:"100",max:"250"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weight (kg)"}),(0,r.jsx)("input",{type:"number",id:"weight",name:"weight",value:f.weight,onChange:N,className:"input-field",placeholder:"e.g. 70",min:"30",max:"200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Age"}),(0,r.jsx)("input",{type:"number",id:"age",name:"age",value:f.age,onChange:N,className:"input-field",placeholder:"e.g. 21",min:"16",max:"50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"course",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course"}),(0,r.jsx)("input",{type:"number",id:"course",name:"course",value:f.course,onChange:N,className:"input-field",placeholder:"e.g. 1, 2, 3",min:1})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"sex",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sex"}),(0,r.jsxs)("select",{id:"sex",name:"sex",value:f.sex,onChange:N,className:"input-field",children:[(0,r.jsx)("option",{value:"",children:"Select Sex"}),(0,r.jsx)("option",{value:"Male",children:"Male"}),(0,r.jsx)("option",{value:"Female",children:"Female"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsx)(c.default,{href:"/cadets/".concat(m),className:"px-6 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:p,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),p?"Saving...":"Save Changes"]})]})]})]})]})})}},9893:function(e,a,t){"use strict";t.d(a,{Z:function(){return N}});var r=t(7437),s=t(2265),l=t(9376),n=t(8293),i=t(2369),d=t(5929),o=t(7226);function c(){let[e,a]=(0,s.useState)("dark");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");if(e)a(e),document.documentElement.classList.toggle("dark","dark"===e),document.documentElement.classList.toggle("light","light"===e);else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";a(e),document.documentElement.classList.toggle("dark","dark"===e),document.documentElement.classList.toggle("light","light"===e)}},[]),(0,r.jsx)("button",{onClick:()=>{let t="dark"===e?"light":"dark";a(t),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(t),localStorage.setItem("theme",t)},className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",title:"Switch to ".concat("dark"===e?"light":"dark"," mode"),children:"dark"===e?(0,r.jsx)(d.Z,{className:"h-5 w-5"}):(0,r.jsx)(o.Z,{className:"h-5 w-5"})})}let m=e=>{let{className:a=""}=e;return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,r.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),(0,r.jsx)("path",{d:"M9 9l6 6M15 9l-6 6",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M12 7v6",stroke:"currentColor",strokeWidth:"1.5"})]})};function h(){let[e,a]=(0,s.useState)("");return(0,s.useEffect)(()=>{let e=localStorage.getItem("user_info");if(e)try{let t=JSON.parse(e);a(t.username||t.name||"User")}catch(e){a("User")}},[]),(0,r.jsx)("header",{className:"border-b border-gray-200 dark:border-gray-700/50 bg-white dark:bg-gray-800/50",children:(0,r.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{className:"lg:hidden p-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,r.jsx)(n.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(m,{className:"w-8 h-8 text-primary"}),(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Medical Record for OTA Chennai"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(c,{}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Welcome, ",e||"User"]}),(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"h-5 w-5 text-primary"})})]})]})]})})})}var x=t(7648),g=t(4938),u=t(5805),p=t(4401),j=t(9397),b=t(8736),y=t(7692);let f=e=>{let{className:a=""}=e;return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,r.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),(0,r.jsx)("path",{d:"M9 9l6 6M15 9l-6 6",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M12 7v6",stroke:"currentColor",strokeWidth:"1.5"})]})},k=[{name:"Dashboard",href:"/dashboard",icon:g.Z},{name:"Cadet Records",href:"/cadets",icon:u.Z},{name:"Medical History",href:"/medical-history",icon:p.Z},{name:"Add Record",href:"/medical-records/new",icon:j.Z},{name:"Reports",href:"/reports",icon:b.Z}];function v(){let e=(0,l.usePathname)(),a=(0,l.useRouter)();return(0,r.jsxs)("aside",{className:"w-64 flex-col bg-white dark:bg-gray-800/50 border-r border-gray-200 dark:border-gray-700/50 p-4 hidden lg:flex",children:[(0,r.jsx)("div",{className:"flex flex-col gap-y-2 mb-8",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(f,{className:"w-8 h-8 text-primary"}),(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"HEALOTAC"})})]})}),(0,r.jsx)("nav",{className:"flex-1 flex flex-col gap-2",children:k.map(a=>{let t=a.icon,s=e===a.href;return(0,r.jsxs)(x.default,{href:a.href,className:"\n                flex items-center gap-3 rounded-lg px-3 py-2 font-medium\n                ".concat(s?"bg-primary/10 dark:bg-primary/20 text-primary dark:text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800","\n              "),children:[(0,r.jsx)(t,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:a.name})]},a.name)})}),(0,r.jsxs)("button",{onClick:()=>{localStorage.removeItem("jwt_token"),localStorage.removeItem("user_info"),a.push("/")},className:"flex items-center gap-3 rounded-lg px-3 py-2 font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 mt-auto",children:[(0,r.jsx)(y.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Logout"})]})]})}function N(e){let{children:a}=e,t=(0,l.useRouter)();return(0,s.useEffect)(()=>{localStorage.getItem("jwt_token")||t.push("/")},[t]),(0,r.jsxs)("div",{className:"flex min-h-screen",children:[(0,r.jsx)(v,{}),(0,r.jsx)("div",{className:"w-px bg-gray-200 dark:bg-gray-700/50"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsx)(h,{}),(0,r.jsx)("main",{className:"flex-1 p-6 lg:p-8 bg-background-light dark:bg-background-dark",children:a})]})]})}}},function(e){e.O(0,[631,971,117,744],function(){return e(e.s=7456)}),_N_E=e.O()}]);