(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{7456:function(e,a,t){Promise.resolve().then(t.bind(t,7447))},5137:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(8030).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7447:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var s=t(7437),r=t(2265),l=t(6463),i=t(7357),n=t(5137),d=t(2022);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,t(8030).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var o=t(7138);function m(e){var a;let{params:t}=e,m=(0,l.useRouter)(),h=parseInt(t.id),[x,g]=(0,r.useState)(null),[u,p]=(0,r.useState)(null),[j,b]=(0,r.useState)(!0),[y,f]=(0,r.useState)(!1),[v,k]=(0,r.useState)(null),[N,w]=(0,r.useState)({name:"",battalion:"",company:"",joinDate:"",status:"Active",healthStatus:"Fit",height:"",weight:"",age:"",course:"",sex:""});(0,r.useEffect)(()=>{S()},[h]);let S=async()=>{try{b(!0);let[e,a]=await Promise.all([fetch("/api/cadets/".concat(h)),fetch("/api/cadets/filters")]);e.ok||(0,l.notFound)();let t=await e.json(),s=await a.json();g(t),p(s),w({name:t.name||"",battalion:t.battalion||"",company:t.company||"",joinDate:t.joinDate?t.joinDate.split("T")[0]:"",status:t.status||"Active",healthStatus:t.healthStatus||"Fit",height:t.height?t.height.toString():"",weight:t.weight?t.weight.toString():"",age:t.age?t.age.toString():"",course:t.course||"",sex:t.sex||""})}catch(e){console.error("Error fetching data:",e),k("Failed to load cadet data")}finally{b(!1)}},C=e=>{let{name:a,value:t}=e.target;w(e=>({...e,[a]:t}))},E=async e=>{e.preventDefault(),f(!0),k(null);try{if(!N.name||!N.battalion||!N.company||!N.joinDate)throw Error("Name, battalion, company, and join date are required");let e={name:N.name,battalion:N.battalion,company:N.company,joinDate:N.joinDate,status:N.status,healthStatus:N.healthStatus,height:N.height?parseInt(N.height):void 0,weight:N.weight?parseInt(N.weight):void 0,age:N.age?parseInt(N.age):void 0,course:N.course||void 0,sex:N.sex||void 0},a=await fetch("/api/cadets/".concat(h),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update cadet")}console.log("✅ CADET UPDATED SUCCESSFULLY"),m.push("/cadets/".concat(h))}catch(e){console.error("❌ Error updating cadet:",e),k(e instanceof Error?e.message:"Failed to update cadet")}finally{f(!1)}},D="all"===N.battalion?(null==u?void 0:u.companies)||[]:(null==u?void 0:null===(a=u.companiesByBattalion)||void 0===a?void 0:a[N.battalion])||[];return j?(0,s.jsx)(i.default,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading cadet data..."})]})})}):v&&!x?(0,s.jsx)(i.default,{children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsxs)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error: ",v]}),(0,s.jsx)(o.default,{href:"/cadets",className:"btn-primary",children:"Back to Cadets"})]})}):(0,s.jsx)(i.default,{children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)(o.default,{href:"/cadets/".concat(h),className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[(0,s.jsx)(n.Z,{className:"h-4 w-4"}),"Back to Cadet Details"]})}),(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(d.Z,{className:"h-6 w-6 text-primary"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Cadet Information"})]}),(0,s.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[v&&(0,s.jsx)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,s.jsx)("p",{className:"text-red-600 dark:text-red-400",children:v})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:N.name,onChange:C,className:"input-field",placeholder:"Enter full name",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"joinDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Join Date *"}),(0,s.jsx)("input",{type:"date",id:"joinDate",name:"joinDate",value:N.joinDate,onChange:C,className:"input-field",required:!0})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Military Assignment"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"battalion",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Battalion *"}),(0,s.jsxs)("select",{id:"battalion",name:"battalion",value:N.battalion,onChange:C,className:"input-field",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Battalion"}),null==u?void 0:u.battalions.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company *"}),(0,s.jsxs)("select",{id:"company",name:"company",value:N.company,onChange:C,className:"input-field",required:!0,disabled:!N.battalion,children:[(0,s.jsx)("option",{value:"",children:"Select Company"}),D.map(e=>(0,s.jsxs)("option",{value:e,children:[e," Company"]},e))]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Status Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cadet Status"}),(0,s.jsxs)("select",{id:"status",name:"status",value:N.status,onChange:C,className:"input-field",children:[(0,s.jsx)("option",{value:"Active",children:"Active"}),(0,s.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,s.jsx)("option",{value:"Graduated",children:"Graduated"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"healthStatus",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Health Status"}),(0,s.jsxs)("select",{id:"healthStatus",name:"healthStatus",value:N.healthStatus,onChange:C,className:"input-field",children:[(0,s.jsx)("option",{value:"Fit",children:"Fit"}),(0,s.jsx)("option",{value:"Under Treatment",children:"Under Treatment"}),(0,s.jsx)("option",{value:"Recovered",children:"Recovered"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Demographics (Optional)"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"height",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Height (cm)"}),(0,s.jsx)("input",{type:"number",id:"height",name:"height",value:N.height,onChange:C,className:"input-field",placeholder:"e.g. 175",min:"100",max:"250"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weight (kg)"}),(0,s.jsx)("input",{type:"number",id:"weight",name:"weight",value:N.weight,onChange:C,className:"input-field",placeholder:"e.g. 70",min:"30",max:"200"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Age"}),(0,s.jsx)("input",{type:"number",id:"age",name:"age",value:N.age,onChange:C,className:"input-field",placeholder:"e.g. 21",min:"16",max:"50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"course",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course"}),(0,s.jsx)("input",{type:"text",id:"course",name:"course",value:N.course,onChange:C,className:"input-field",placeholder:"e.g. NDA, CDS"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"sex",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sex"}),(0,s.jsxs)("select",{id:"sex",name:"sex",value:N.sex,onChange:C,className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"Select Sex"}),(0,s.jsx)("option",{value:"Male",children:"Male"}),(0,s.jsx)("option",{value:"Female",children:"Female"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,s.jsx)(o.default,{href:"/cadets/".concat(h),className:"px-6 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",disabled:y,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(c,{className:"h-4 w-4 mr-2"}),y?"Saving...":"Save Changes"]})]})]})]})]})})}},7357:function(e,a,t){"use strict";t.d(a,{default:function(){return N}});var s=t(7437),r=t(2265),l=t(6463),i=t(2873),n=t(2022),d=t(8296),c=t(2699);function o(){let[e,a]=(0,r.useState)("dark");return(0,r.useEffect)(()=>{let e=localStorage.getItem("theme");if(e)a(e),document.documentElement.classList.toggle("dark","dark"===e),document.documentElement.classList.toggle("light","light"===e);else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";a(e),document.documentElement.classList.toggle("dark","dark"===e),document.documentElement.classList.toggle("light","light"===e)}},[]),(0,s.jsx)("button",{onClick:()=>{let t="dark"===e?"light":"dark";a(t),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(t),localStorage.setItem("theme",t)},className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",title:"Switch to ".concat("dark"===e?"light":"dark"," mode"),children:"dark"===e?(0,s.jsx)(d.Z,{className:"h-5 w-5"}):(0,s.jsx)(c.Z,{className:"h-5 w-5"})})}let m=e=>{let{className:a=""}=e;return(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,s.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),(0,s.jsx)("path",{d:"M12 7v6M10 10h4",stroke:"currentColor",strokeWidth:"2"})]})};function h(){let[e,a]=(0,r.useState)("");return(0,r.useEffect)(()=>{let e=localStorage.getItem("user_info");if(e)try{let t=JSON.parse(e);a(t.username||t.name||"User")}catch(e){a("User")}},[]),(0,s.jsx)("header",{className:"border-b border-gray-200 dark:border-gray-700/50 bg-white dark:bg-gray-800/50",children:(0,s.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{className:"lg:hidden p-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,s.jsx)(i.Z,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(m,{className:"w-8 h-8 text-primary"}),(0,s.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"CURACADET"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(o,{}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Welcome, ",e||"User"]}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center",children:(0,s.jsx)(n.Z,{className:"h-5 w-5 text-primary"})})]})]})]})})})}var x=t(7138),g=t(3852),u=t(1240),p=t(4207),j=t(2513),b=t(2023),y=t(9896);let f=e=>{let{className:a=""}=e;return(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,s.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),(0,s.jsx)("path",{d:"M12 7v6M10 10h4",stroke:"currentColor",strokeWidth:"2"})]})},v=[{name:"Dashboard",href:"/dashboard",icon:g.Z},{name:"Cadet Records",href:"/cadets",icon:u.Z},{name:"Medical History",href:"/medical-history",icon:p.Z},{name:"Add Record",href:"/medical-records/new",icon:j.Z},{name:"Reports",href:"/reports",icon:b.Z}];function k(){let e=(0,l.usePathname)(),a=(0,l.useRouter)();return(0,s.jsxs)("aside",{className:"w-64 flex-col bg-white dark:bg-gray-800/50 border-r border-gray-200 dark:border-gray-700/50 p-4 hidden lg:flex",children:[(0,s.jsx)("div",{className:"flex flex-col gap-y-2 mb-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(f,{className:"w-8 h-8 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"CURACADET"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Attendant Portal"})]})]})}),(0,s.jsx)("nav",{className:"flex-1 flex flex-col gap-2",children:v.map(a=>{let t=a.icon,r=e===a.href;return(0,s.jsxs)(x.default,{href:a.href,className:"\n                flex items-center gap-3 rounded-lg px-3 py-2 font-medium\n                ".concat(r?"bg-primary/10 dark:bg-primary/20 text-primary dark:text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800","\n              "),children:[(0,s.jsx)(t,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:a.name})]},a.name)})}),(0,s.jsxs)("button",{onClick:()=>{localStorage.removeItem("jwt_token"),localStorage.removeItem("user_info"),a.push("/")},className:"flex items-center gap-3 rounded-lg px-3 py-2 font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 mt-auto",children:[(0,s.jsx)(y.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Logout"})]})]})}function N(e){let{children:a}=e,t=(0,l.useRouter)();return(0,r.useEffect)(()=>{localStorage.getItem("jwt_token")||t.push("/")},[t]),(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsx)(k,{}),(0,s.jsx)("div",{className:"w-px bg-gray-200 dark:bg-gray-700/50"}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)(h,{}),(0,s.jsx)("main",{className:"flex-1 p-6 lg:p-8 bg-background-light dark:bg-background-dark",children:a})]})]})}}},function(e){e.O(0,[841,971,23,744],function(){return e(e.s=7456)}),_N_E=e.O()}]);